<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TrunkTrunk | Writer meet Reader - Reader meet Writer</title>
    <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,900,700,700italic,400italic' rel='stylesheet' type='text/css'>
    <link data--track="true" href="http://demo.trunktrunk.org/assets/application.css" media="all" rel="stylesheet" />
    <script data-turbolinks-track="true" src="http://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script data-turbolinks-track="true" src="fake/assets/jquery_ujs.js?body=1"></script>
    <script data-turbolinks-track="true" src="fake/assets/TrunkForms/Form.js?body=1"></script>
    <script data-turbolinks-track="true" src="fake/assets/TrunkForms/InviteForm.js?body=1"></script>
    <script data-turbolinks-track="true" src="fake/assets/TrunkForms/ReportForm.js?body=1"></script>
    <script data-turbolinks-track="true" src="fake/assets/twitter/bootstrap/transition.js?body=1"></script>
    <script data-turbolinks-track="true" src="fake/assets/twitter/bootstrap/alert.js?body=1"></script>
    <script data-turbolinks-track="true" src="fake/assets/twitter/bootstrap/button.js?body=1"></script>
    <script data-turbolinks-track="true" src="fake/assets/twitter/bootstrap/carousel.js?body=1"></script>
    <script data-turbolinks-track="true" src="fake/assets/twitter/bootstrap/collapse.js?body=1"></script>
    <script data-turbolinks-track="true" src="fake/assets/twitter/bootstrap/dropdown.js?body=1"></script>
    <script data-turbolinks-track="true" src="fake/assets/twitter/bootstrap/modal.js?body=1"></script>
    <script data-turbolinks-track="true" src="fake/assets/twitter/bootstrap/tooltip.js?body=1"></script>
    <script data-turbolinks-track="true" src="fake/assets/twitter/bootstrap/popover.js?body=1"></script>
    <script data-turbolinks-track="true" src="fake/assets/twitter/bootstrap/scrollspy.js?body=1"></script>
    <script data-turbolinks-track="true" src="fake/assets/twitter/bootstrap/tab.js?body=1"></script>
    <script data-turbolinks-track="true" src="fake/assets/twitter/bootstrap/affix.js?body=1"></script>
    <script data-turbolinks-track="true" src="fake/assets/twitter/bootstrap.js?body=1"></script>
    <script data-turbolinks-track="true" src="fake/assets/jquery.ui.core.js?body=1"></script>
    <script data-turbolinks-track="true" src="fake/assets/jquery.ui.widget.js?body=1"></script>
    <script data-turbolinks-track="true" src="fake/assets/jquery.ui.position.js?body=1"></script>
    <script data-turbolinks-track="true" src="fake/assets/jquery.ui.menu.js?body=1"></script>
    <script data-turbolinks-track="true" src="fake/assets/jquery.ui.autocomplete.js?body=1"></script>
    <script data-turbolinks-track="true" src="fake/assets/lib.js?body=1"></script>
    <script data-turbolinks-track="true" src="fake/assets/header.js?body=1"></script>
    <script data-turbolinks-track="true" src="fake/assets/jquery.showandtell.1.1.1.min.js?body=1"></script>
    <script data-turbolinks-track="true" src="fake/assets/jquery.d_modal.js?body=1"></script>
    <script data-turbolinks-track="true" src="fake/assets/report.js?body=1"></script>
    <script data-turbolinks-track="true" src="fake/assets/jquery.Jcrop.min.js?body=1"></script>
    <script data-turbolinks-track="true" src="fake/assets/jquery.cropper.js?body=1"></script>
    <script data-turbolinks-track="true" src="fake/assets/application.js?body=1"></script>
    
    <script src="fake/assets/posts.js?body=1"></script>

    <link rel="stylesheet" type="text/css" href="style.css">
    <script src="tt_editor.js"></script>

  </head>
  <body>
    <div id="top"></div>
    <header class="site-header">
 <nav>
     <a href="http://demo.trunktrunk.org/" id="nav_home" class="pull-left">
         <img src="http://demo.trunktrunk.org/assets/tt_logo_header.png"
              alt="Home"
              class="nav-img"
              title="Home">
     </a>

     <div class="pull-right nav-items">
           <a href="http://demo.trunktrunk.org/posts/new"><span class='nav-label'>create</span> <span class='glyphicon glyphicon-pencil nav-icon'></span></a>
           <a href="http://demo.trunktrunk.org/dashboard"><span class='glyphicon glyphicon-home nav-icon'></span></a>

           <input type="text" placeholder="Search..."
               class="searchbar" id="searchbar">
           <a href="#search" id="nav-search"><span class="glyphicon glyphicon-search nav-icon"></span></a>
       </div>

    </nav>
 </header>
 <article class="edit-article article-view">


<!---- BEGIN EDITOR ---->

<!-- new styling -->
<script>
    $(window).scroll(function() {
        console.log($("html").scrollTop() + " scrolled");
        if($("html").scrollTop() < 40) {
            $(".saving-status").css("margin-top",$("html").scrollTop()+"px");
        }
    });//40px
</script>
<div class="saving-status saved"></div>

<!--
    PUBLISH BUTTON
    Clicking this leads to a modal prompting for a potential price, if the
       article has not been published before.
    Here you conforim publishing.
    Upon publishing you are told that you can change the price in the
      settings.
    You are also given a "View published article" link to view the
      published article.
    If the article has already been published, publishing changes happens
      immediately on click.
-->
<div class="publish-button published"><span class="glyphicon glyphicon-send"></span></div>

<!--
    SETTINGS BUTTON
    Clicking this leads to a settings modal. Settings are:
    - Price
    - Delete
    - Unpublish (if published)
-->
<div class="settings-button"><span class="glyphicon glyphicon-cog"></span></div>

<!-- HEADER -->
<header id="header" class="article-header article-category">
    <hgroup class="title">
    <h5>
        <a href='/readers/5'>
          By nt /
          Jun 19, 2014
        </a>
    </h5>
    <h1>no tag</h1>
</hgroup>

<!-- MAIN IMAGE UPLOAD -->
<form accept-charset="UTF-8" action="/post/attach" class="media_form crop_form" enctype="multipart/form-data" id="main_image_form" method="post" style=""><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="sgPUtwEkxRl6LiqzHEwZg5PStTtkvloYdLcxK+sAG5k=" /></div>
        <input id="main_image_form_file" name="post[media]" type="file" />
        <input id="post_type" name="post[type]" type="hidden" value="main_image" />
        <input id="post_prodid" name="post[prodid]" type="hidden" value="14" />

        <img src="http://demo.trunktrunk.org/assets/image_button_article_2x.png" class="main-img trigger" id="main_image">
        <input name="commit" type="submit" value="Update Post" />
</form>    <script>
        $(document).ready(function() {
            $("#main_image_form").submit(function(e) {
                e.preventDefault();
                return false;
            });

            $("#main_image_form_file").trigger_cropping({
                scaleWidth: 960,
                aspectRatio: 16/9
            }, function(img_src) {
                $("#main_image")
                    .attr("src", img_src)
                    .css("opacity", 0.5);

                var media_data = base64_to_blob(img_src);

                var $form = $("#main_image_form");
                var formData = new FormData($form[0]);
                formData.append("post[media]", media_data, "article-main-image");

                $.ajax({
                    url: $form.attr("action"),
                    type: $form.attr("method"),
                    data: formData,
                    processData: false,
                    contentType: false,
                    success: function() {
                        $("#main_image").css("opacity", 1);
                    }
                });
            });
        });
    </script>

    <figure>
      <figcaption contenteditable="true" id="main_img_caption" class="form-element edit-field">

      </figcaption>
    </figure>
<!-- END MAIN IMAGE UPLOAD -->
    
<!-- TITLE -->
<textarea type="text" name="title" id="title" class="form-element edit-field" placeholder="Title" value=""></textarea>
<script>
        var $title = $("textarea#title");

        $title.keypress(function(e) {
            if(e.which == 13) {
                e.stopPropagation();
                e.preventDefault();
                return false;
            }
        }).keyup(function(e) {
            $title[0].style.height = '24px';
            $title[0].style.height = $title[0].scrollHeight + 'px';
        });

        $(document).ready(function() {
            $title[0].style.height = '24px';
            $title[0].style.height = $title[0].scrollHeight + 'px';
        }); 
</script>

  </header>

<!--
    TAGS
    On error, the error should be explained with a message in a tooltip.
-->
<div class="article-info">
    <div class="tags" id="tags"></div>
</div>

<!-- MAIN TEXT -->
  <section class="g-body content-container">
    <div id="main" style="position:relative">
      <div class="toolbar" style="display:block" style="z-index:3000">
        <button data-command-name="bold" data-toggle="tooltip" data-placement="left" title="Bold">B</button>
        <button data-command-name="italic" data-toggle="tooltip" data-placement="left" title="Italic">i</button>
        <button data-command-name="h1" data-toggle="tooltip" data-placement="left" title="Big heading">H1</button>
        <button data-command-name="h2" data-toggle="tooltip" data-placement="left" title="Small heading">H2</button>
        <button data-command-name="blockquote" data-toggle="tooltip" data-placement="left" title="Quotation">"</button>
        <button data-command-name="linkPrompt" data-toggle="tooltip" data-placement="left" title="Link">Link</button>
        <button data-command-name="insertUnorderedList" data-toggle="tooltip" data-placement="left" title="Insert unordered list">UL</button>
        <button data-command-name="addImage" data-toggle="tooltip" data-placement="left" title="Insert image">img</button>
      </div>
      <script>
        $(".toolbar button").tooltip("hide");
      </script>

      <article id="content" class="content">
      </article>

    </div>
    <script>

      require(["tt_editor"],function(tt_editor){

          var scribeElement = document.querySelector('.content');
          var toolbarElement = document.querySelector('.toolbar');
          var mediabarElement = document.getElementById('media-bar');

          function addImage(event,element){
            var image = document.getElementById("an-image");
            element.parentNode.insertBefore(image,element);
          }

          var tte = new tt_editor(scribeElement,toolbarElement,mediabarElement,addImage);
          console.log(tte);

      });
    </script>
</section>
<!-- END MAIN TEXT -->

<!-- PAGE-SPECIFIC JS INCLUDES -->
<script data-turbolinks-track="true" src="fake/assets/hiddenform.edit.js?body=1"></script>
<script data-turbolinks-track="true" src="fake/assets/edit-field.js?body=1"></script>
<script data-turbolinks-track="true" src="fake/assets/edit-tags.js?body=1"></script>
<script data-turbolinks-track="true" src="fake/assets/edit-save-publish.js?body=1"></script>
<script data-turbolinks-track="true" src="fake/assets/edit-article.js?body=1"></script>
<script data-turbolinks-track="true" src="fake/assets/edit-price.js?body=1"></script>
<!-- TODO: Why is groups used here!? -->
<script data-turbolinks-track="true" src="fake/assets/groups.js?body=1"></script>


<!-- TOS PROMPTER -->
  <script data-turbolinks-track="true" src="fake/assets/tos.js?body=1"></script>
  <script>
      var vars = {
          post: "14",
          viewer: "5"
      };

      (function($) {
          $(document).ready(function() {
              var post = vars.post,
                  reader = vars.viewer;

              // Present writer with a "redirect-to-TOS" modal if we're not
              // currently editing the TOS and he has yet to accept the tos
              loadRedirectIf(post,reader,function(){ loadRedirect(post,reader);});
          });
      })(jQuery);
  </script>

<!-- DEPRECATED IMAGE INSERTION -->
<div class="add-content-box">
    <form accept-charset="UTF-8" action="/post/attach" class="media_form" enctype="multipart/form-data" id="imgform" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" />    <input name="authenticity_token" type="hidden" value="sgPUtwEkxRl6LiqzHEwZg5PStTtkvloYdLcxK+sAG5k=" /></div>
      <input id="post_media" name="post[media]" type="file" />
      <input id="post_type" name="post[type]" type="hidden" value="image" />
      <input id="post_prodid" name="post[prodid]" type="hidden" value="14" />
      <button class="trigger" id="imgbutton" name="button" type="submit">insert Image</button>
      <input name="commit" type="submit" value="Update Post" />
    </form>
</div>

<!--
    SETTINGS MODAL
-->
<div class="settings-modal">
    <form action="http://demo.trunktrunk.org/posts/14" class="button_to" method="post"><div><input name="_method" type="hidden" value="delete" /><input class="btn btn-default" type="submit" value="Delete" /><input name="authenticity_token" type="hidden" value="sgPUtwEkxRl6LiqzHEwZg5PStTtkvloYdLcxK+sAG5k=" /></div></form>
    <button class="btn btn-default" id="unpublish-button">Unpublish</button>
    <button class="btn btn-primary" id="discard-changes-button">Discard changes since last publish</button>
    <div class="price-box input-group">
      <input type="number" class="form-control edit-field" id="price" style="width: 90px;" step="0.01" min=0 value="0.0">
    </div>
</div>

<!-- SET UP SAVE AND PUBLISH -->
<form accept-charset="UTF-8" action="http//demo.trunktrunk.org/posts/14" data-remote="true" id="post-form" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="_method" type="hidden" value="patch" /></div>
</form>
<script>
    (function($) {
        $(document).ready(function() {
            setUpSaveAndPublish({
                discard_link: "http://demo.trunktrunk.org/posts/14/unpublished_revisions",
                is_published: false
            });
        });
    })(jQuery);
</script>

<!---- END EDITOR ---->


</article>

      <footer class="site-footer"><div class="wrap">
    <span class="copyright">All rights reserved &copy; TrunkTrunk.com</span>
    <span class="to-top"><a href="#top" class="to-top-link">Back to top</a></span>
    <span><a href="http://demo.trunktrunk.org/tos">Terms of Service</a></span>
    <!--span><a href="#NoPrivacyAllowed">Privacy Policy</a></span-->
    <span><a target="_blank" href="mailto:support@trunktrunk.org">Contact</a></span>
    <!--span><a href="#AboutWhat?">About</a></span-->
</div></footer>

    </body>
</html>
